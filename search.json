[{"title":"《机器人控制系统和MATLAB Simulink仿真》笔记1-两关节机械臂PD控制（不考虑重力）","path":"/2023/04/05/《机器人控制系统和MATLAB-Simulink仿真》笔记1-两关节机械臂PD控制（不考虑重力）/","content":"前言 最近在看控制的东西，想动手实践一下，看到有书名曰《机器人控制系统和MATLAB simulink仿真》，于是学习一下做做记录，也丰富自己对控制和动力学的理解。 二关节机械臂的动力学推导 书上给出了不考虑重力的动力学公式为： 这里的p1p_1p1​、p2p_2p2​、p3p_3p3​、q1q_1q1​、q2q_2q2​都是什么东西？写得不清不楚的，不过推导动力学用拉格朗日是传统艺能了，我们就来推导一下。 不考虑重力、摩擦力和干扰，那我们就不用考虑系统的势能了。 作为一个二关节机械臂，我们认为连杆的质量都集中在末端,旋转关节都在始端，两个旋转关节的旋转角度分别如图旋转θ1\\theta_1θ1​和θ2\\theta_2θ2​，我们取它们作为广义坐标。 从基座如图建立平面坐标系，我们可以写出每个连杆末端旋转副的位置.第一个连杆XXX方向和YYY方向的坐标为： x1=l1cos⁡θ1y1=l1sin⁡θ1\\begin{aligned} &amp;x_1=l_1\\cos\\theta_1\\\\ &amp;y_1=l_1\\sin\\theta_1 \\end{aligned}​x1​=l1​cosθ1​y1​=l1​sinθ1​​ 第二个连杆XXX方向和YYY方向的坐标为： x2=l1cos⁡θ1+l2cos⁡(θ1+θ2)y2=l1sin⁡θ1+l2sin⁡(θ1+θ2)\\begin{aligned} &amp;x_2=l_1\\cos\\theta_1+l_2\\cos(\\theta_1+\\theta_2)\\\\ &amp;y_2=l_1\\sin\\theta_1+l_2\\sin(\\theta_1+\\theta_2) \\end{aligned}​x2​=l1​cosθ1​+l2​cos(θ1​+θ2​)y2​=l1​sinθ1​+l2​sin(θ1​+θ2​)​ 第一个连杆XXX方向和YYY方向的速度（对时间求导）为： x˙1=−l1sin⁡θ1 θ1˙y˙1=l1cos⁡θ1 θ1˙\\begin{aligned} &amp;\\dot{x}_1=-l_1\\sin\\theta_1\\,\\dot{\\theta_1}\\\\ &amp;\\dot{y}_1=l_1\\cos\\theta_1\\,\\dot{\\theta_1} \\end{aligned}​x˙1​=−l1​sinθ1​θ1​˙​y˙​1​=l1​cosθ1​θ1​˙​​ 第二个连杆XXX方向和YYY方向的速度（对时间求导）为： x˙2=−l1sin⁡θ1 θ1˙−l2sin⁡(θ1+θ2)(θ1˙+θ2˙)y˙2=l1cos⁡θ1 θ1˙+l2cos⁡(θ1+θ2)(θ1˙+θ2˙)\\begin{aligned} &amp;\\dot{x}_2=-l_1\\sin\\theta_1\\,\\dot{\\theta_1}-l_2\\sin(\\theta_1+\\theta_2)(\\dot{\\theta_1}+\\dot{\\theta_2})\\\\ &amp;\\dot{y}_2=l_1\\cos\\theta_1\\,\\dot{\\theta_1}+l_2\\cos(\\theta_1+\\theta_2)(\\dot{\\theta_1}+\\dot{\\theta_2}) \\end{aligned}​x˙2​=−l1​sinθ1​θ1​˙​−l2​sin(θ1​+θ2​)(θ1​˙​+θ2​˙​)y˙​2​=l1​cosθ1​θ1​˙​+l2​cos(θ1​+θ2​)(θ1​˙​+θ2​˙​)​ 第一个连杆的动能： T1=12m1(x˙12+y˙12)=12m1[(−l1sin⁡θ1 θ1˙)2+(l1cos⁡θ1 θ1˙)2]=12m1l12θ˙12\\begin{aligned} T_1&amp;=\\frac{1}{2}m_1(\\dot{x}_1^2+\\dot{y}_1^2)\\\\ &amp;=\\frac{1}{2}m_1\\left[\\left(-l_1\\sin\\theta_1\\,\\dot{\\theta_1}\\right)^2+\\left(l_1\\cos\\theta_1\\,\\dot{\\theta_1}\\right)^2\\right]\\\\ &amp;=\\frac{1}{2}m_1l_1^2\\dot{\\theta}_1^2 \\end{aligned}T1​​=21​m1​(x˙12​+y˙​12​)=21​m1​[(−l1​sinθ1​θ1​˙​)2+(l1​cosθ1​θ1​˙​)2]=21​m1​l12​θ˙12​​ 第二个连杆的动能： T2=12m2(x˙22+y˙22)=12m2{[−l1sin⁡θ1 θ1˙−l2sin⁡(θ1+θ2)(θ1˙+θ2˙)]2+[l1cos⁡θ1 θ1˙+l2cos⁡(θ1+θ2)(θ1˙+θ2˙))]2}=12m2[l12θ˙12+l22(θ˙1+θ˙2)2+2l1l2θ˙1(θ˙1+θ˙2)cos⁡θ2]\\begin{aligned} T_2&amp;=\\frac{1}{2}m_2(\\dot{x}_2^2+\\dot{y}_2^2)\\\\ &amp;=\\frac{1}{2}m_2\\Biggr\\{\\left[-l_1\\sin\\theta_1\\,\\dot{\\theta_1}-l_2\\sin(\\theta_1+\\theta_2)(\\dot{\\theta_1}+\\dot{\\theta_2})\\right]^2\\\\&amp;\\quad +\\left[l_1\\cos\\theta_1\\,\\dot{\\theta_1}+l_2\\cos(\\theta_1+\\theta_2)(\\dot{\\theta_1}+\\dot{\\theta_2}))\\right]^2\\Biggr\\}\\\\ &amp;=\\frac{1}{2}m_2\\left[l_1^2\\dot{\\theta}_1^2+l_2^2(\\dot{\\theta}_1+\\dot{\\theta}_2)^2+2l_1l_2\\dot{\\theta}_1(\\dot{\\theta}_1+\\dot{\\theta}_2)\\cos\\theta_2\\right] \\end{aligned}T2​​=21​m2​(x˙22​+y˙​22​)=21​m2​{[−l1​sinθ1​θ1​˙​−l2​sin(θ1​+θ2​)(θ1​˙​+θ2​˙​)]2+[l1​cosθ1​θ1​˙​+l2​cos(θ1​+θ2​)(θ1​˙​+θ2​˙​))]2}=21​m2​[l12​θ˙12​+l22​(θ˙1​+θ˙2​)2+2l1​l2​θ˙1​(θ˙1​+θ˙2​)cosθ2​]​ 由于不考虑重力、摩擦力和干扰，于是系统的总能量就是两个动能之和，记作LLL。 L=T1+T2=12m1l12θ˙12+12m2[l12θ˙12+l22(θ˙1+θ˙2)2+2l1l2θ˙1(θ˙1+θ˙2)cos⁡θ2]=12m1l12θ˙12+12m2l12θ˙12+12m2l22θ˙12+m2l22θ˙1θ˙2+12m2l22θ˙22+m2l1l2(θ˙12+θ˙1θ˙2)cos⁡θ2\\begin{aligned} L&amp;=T_1+T_2\\\\ &amp;=\\frac{1}{2}m_1l_1^2\\dot{\\theta}_1^2+\\frac{1}{2}m_2\\left[l_1^2\\dot{\\theta}_1^2+l_2^2(\\dot{\\theta}_1+\\dot{\\theta}_2)^2+2l_1l_2\\dot{\\theta}_1(\\dot{\\theta}_1+\\dot{\\theta}_2)\\cos\\theta_2\\right]\\\\ &amp;=\\frac{1}{2}m_1l_1^2\\dot{\\theta}_1^2+\\frac{1}{2}m_2l_1^2\\dot{\\theta}_1^2+\\frac{1}{2}m_2l_2^2\\dot{\\theta}_1^2+m_2l_2^2\\dot{\\theta}_1\\dot{\\theta}_2+\\frac{1}{2}m_2l_2^2\\dot{\\theta}_2^2+m_2l_1l_2(\\dot{\\theta}_1^2+\\dot{\\theta}_1\\dot{\\theta}_2)\\cos\\theta_2 \\end{aligned}L​=T1​+T2​=21​m1​l12​θ˙12​+21​m2​[l12​θ˙12​+l22​(θ˙1​+θ˙2​)2+2l1​l2​θ˙1​(θ˙1​+θ˙2​)cosθ2​]=21​m1​l12​θ˙12​+21​m2​l12​θ˙12​+21​m2​l22​θ˙12​+m2​l22​θ˙1​θ˙2​+21​m2​l22​θ˙22​+m2​l1​l2​(θ˙12​+θ˙1​θ˙2​)cosθ2​​ 机器人在连杆1和连杆2的驱动关节力矩分别是τ1\\tau_1τ1​和τ2\\tau_2τ2​，利用拉格朗日公式有： ddt(∂L∂θ1˙)−∂L∂θ1=τ1ddt(∂L∂θ2˙)−∂L∂θ2=τ2\\begin{aligned} &amp;\\frac{d}{dt}\\left(\\frac{\\partial L}{\\partial \\dot{\\theta_1}}\\right)-\\frac{\\partial L}{\\partial \\theta_1}=\\tau_1\\\\ &amp;\\frac{d}{dt}\\left(\\frac{\\partial L}{\\partial \\dot{\\theta_2}}\\right)-\\frac{\\partial L}{\\partial \\theta_2}=\\tau_2 \\end{aligned}​dtd​(∂θ1​˙​∂L​)−∂θ1​∂L​=τ1​dtd​(∂θ2​˙​∂L​)−∂θ2​∂L​=τ2​​ 代入上面的公式有： ddt(∂L∂θ1˙)=m1l12θ1¨+m2l12θ¨1+m2l22θ¨1+m2l22θ¨2+2m2l1l2cos⁡θ2 θ¨1−2m2l1l2sin⁡θ2 θ˙1θ˙2+m2l1l2cos⁡θ2 θ¨2−m2l1l2sin⁡θ2 θ˙22\\begin{aligned} \\frac{d}{dt}\\left(\\frac{\\partial L}{\\partial \\dot{\\theta_1}}\\right)=&amp;m_1l_1^2\\ddot{\\theta_1}+m_2l_1^2\\ddot{\\theta}_1+m_2l_2^2\\ddot{\\theta}_1+m_2l_2^2\\ddot{\\theta}_2\\\\&amp;+2m_2l_1l_2\\cos\\theta_2\\,\\ddot{\\theta}_1-2m_2l_1l_2\\sin\\theta_2\\,\\dot{\\theta}_1\\dot{\\theta}_2\\\\&amp;+m_2l_1l_2\\cos\\theta_2\\,\\ddot{\\theta}_2-m_2l_1l_2\\sin\\theta_2\\,\\dot{\\theta}_2^2\\\\ \\end{aligned}dtd​(∂θ1​˙​∂L​)=​m1​l12​θ1​¨​+m2​l12​θ¨1​+m2​l22​θ¨1​+m2​l22​θ¨2​+2m2​l1​l2​cosθ2​θ¨1​−2m2​l1​l2​sinθ2​θ˙1​θ˙2​+m2​l1​l2​cosθ2​θ¨2​−m2​l1​l2​sinθ2​θ˙22​​ ddt(∂L∂θ2˙)=m2l22θ¨1+m2l22θ¨2+m2l1l2cos⁡θ2 θ¨1−m2l1l2sin⁡θ2 θ˙1θ˙2\\begin{aligned} \\frac{d}{dt}\\left(\\frac{\\partial L}{\\partial \\dot{\\theta_2}}\\right)=&amp;m_2l_2^2\\ddot{\\theta}_1+m_2l_2^2\\ddot{\\theta}_2+m_2l_1l_2\\cos\\theta_2\\,\\ddot{\\theta}_1\\\\&amp;-m_2l_1l_2\\sin\\theta_2\\,\\dot{\\theta}_1\\dot{\\theta}_2\\\\ \\end{aligned}dtd​(∂θ2​˙​∂L​)=​m2​l22​θ¨1​+m2​l22​θ¨2​+m2​l1​l2​cosθ2​θ¨1​−m2​l1​l2​sinθ2​θ˙1​θ˙2​​ ∂L∂θ1=0\\begin{aligned} \\frac{\\partial L}{\\partial \\theta_1}=0 \\end{aligned}∂θ1​∂L​=0​ ∂L∂θ2=m2l1l2θ˙12sin⁡θ2+m2l1l2θ˙1θ˙2sin⁡θ2\\begin{aligned} \\frac{\\partial L}{\\partial \\theta_2}=m_2l_1l_2\\dot{\\theta}_1^2\\sin\\theta_2+m_2l_1l_2\\dot{\\theta}_1\\dot{\\theta}_2\\sin\\theta_2 \\end{aligned}∂θ2​∂L​=m2​l1​l2​θ˙12​sinθ2​+m2​l1​l2​θ˙1​θ˙2​sinθ2​​ 整理以后我们就有： (m1l12+m2l12+m2l22+2m2l1l2cos⁡θ2)θ¨1+(m2l1l2cos⁡θ2+m2l22)θ¨2−2m2l1l2sin⁡θ2θ˙1θ˙2−m2l1l2sin⁡θ2θ˙22=τ1\\begin{aligned} &amp;(m_1l_1^2+m_2l_1^2+m_2l_2^2+2m_2l_1l_2\\cos\\theta_2)\\ddot{\\theta}_1+(m_2l_1l_2\\cos\\theta_2+m_2l_2^2)\\ddot{\\theta}_2\\\\&amp;-2m_2l_1l_2\\sin\\theta_2\\dot{\\theta}_1\\dot{\\theta}_2-m_2l_1l_2\\sin\\theta_2\\dot{\\theta}_2^2=\\tau_1 \\end{aligned}​(m1​l12​+m2​l12​+m2​l22​+2m2​l1​l2​cosθ2​)θ¨1​+(m2​l1​l2​cosθ2​+m2​l22​)θ¨2​−2m2​l1​l2​sinθ2​θ˙1​θ˙2​−m2​l1​l2​sinθ2​θ˙22​=τ1​​ (m2l1l2cos⁡θ2+m2l22)θ¨1+m2l22θ¨2+m2l1l2sin⁡θ2θ˙12=τ2\\begin{aligned} &amp;(m_2l_1l_2\\cos\\theta_2+m_2l_2^2)\\ddot{\\theta}_1+m_2l_2^2\\ddot{\\theta}_2+m_2l_1l_2\\sin\\theta_2\\dot{\\theta}_1^2=\\tau_2 \\end{aligned}​(m2​l1​l2​cosθ2​+m2​l22​)θ¨1​+m2​l22​θ¨2​+m2​l1​l2​sinθ2​θ˙12​=τ2​​ 于是我们就可以写成书中的形式，描述为矩阵非常简洁的形式： D(q)q¨+C(q,q˙)q˙=τ\\begin{aligned} \\mathbf{D(q)\\ddot{q}+C(q,\\dot{q})\\dot{q}}=\\bm{\\tau} \\end{aligned}D(q)q¨​+C(q,q˙​)q˙​=τ​ 其中： D(q)=[m1l12+m2l12+m2l22+2m2l1l2cos⁡θ2m2l1l2cos⁡θ2+m2l22m2l1l2cos⁡θ2+m2l22m2l22]\\mathbf{D(q)}=\\begin{bmatrix} m_1l_1^2+m_2l_1^2+m_2l_2^2+2m_2l_1l_2\\cos\\theta_2 &amp; m_2l_1l_2\\cos\\theta_2+m_2l_2^2\\\\ m_2l_1l_2\\cos\\theta_2+m_2l_2^2 &amp; m_2l_2^2 \\end{bmatrix}D(q)=[m1​l12​+m2​l12​+m2​l22​+2m2​l1​l2​cosθ2​m2​l1​l2​cosθ2​+m2​l22​​m2​l1​l2​cosθ2​+m2​l22​m2​l22​​] C(q,q˙)=[−m2l1l2sin⁡θ2θ˙2−m2l1l2sin⁡θ2θ˙1−m2l1l2sin⁡θ2θ˙2m2l1l2sin⁡θ2θ˙10]\\mathbf{C(q,\\dot{q})}=\\begin{bmatrix} -m_2l_1l_2\\sin\\theta_2\\dot{\\theta}_2 &amp; -m_2l_1l_2\\sin\\theta_2\\dot{\\theta}_1-m_2l_1l_2\\sin\\theta_2\\dot{\\theta}_2\\\\ m_2l_1l_2\\sin\\theta_2\\dot{\\theta}_1 &amp; 0 \\end{bmatrix}C(q,q˙​)=[−m2​l1​l2​sinθ2​θ˙2​m2​l1​l2​sinθ2​θ˙1​​−m2​l1​l2​sinθ2​θ˙1​−m2​l1​l2​sinθ2​θ˙2​0​] q=[θ1θ2]q˙=[θ˙1θ˙2]τ=[τ1τ2]\\mathbf{q}=\\begin{bmatrix} \\theta_1\\\\ \\theta_2 \\end{bmatrix}\\quad \\dot{\\mathbf{q}}=\\begin{bmatrix} \\dot{\\theta}_1\\\\ \\dot{\\theta}_2 \\end{bmatrix}\\quad \\bm{\\tau}=\\begin{bmatrix} {\\tau}_1\\\\ {\\tau}_2 \\end{bmatrix}q=[θ1​θ2​​]q˙​=[θ˙1​θ˙2​​]τ=[τ1​τ2​​] 这也就解释了开头书中的公式： 其中 p1=m1l12+m2l12p2=m2l22p2=m2l1l2\\begin{aligned} p_1&amp;=m_1l_1^2+m_2l_1^2\\\\ p_2&amp;=m_2l_2^2\\\\ p_2&amp;=m_2l_1l_2 \\end{aligned}p1​p2​p2​​=m1​l12​+m2​l12​=m2​l22​=m2​l1​l2​​"},{"title":"我的第一篇博客","path":"/2023/04/02/关于我为什么开通博客/","content":"我第一次知道有博客这种东西应该是本科查资料的时候，经常就查到一些大佬自己建的网站，炫酷的页面，舒适的排版，当时就觉得建立博客是一件很酷的事。但那时候并没有想到要建立自己的网站。 其实我本科乃至以前都是不爱做笔记的，每次开学的时候我都信誓旦旦地买了好几本笔记本，下定决心要记上几本。然而有几点原因让我始终不能坚持下去：一来一开始写得工工整整，但后面逐渐潦草，消磨了我写笔记的耐心；二来整理笔记于我而言实在太浪费时间，我的记忆力还算可以的，上课听懂的东西再做整理我觉得不如多看看书做点练习；三来写笔记需要长期的坚持，我那时课业也多，没办法抽出额外的时间坚持(好吧~可能也是借口)。 说来也巧，大一的时候机缘巧合在CSDN注册了一个账号（账号名就是这个网站的名字“小林up”），原因是当时写作业要查资料就知道了这个平台，但是那时只是看没有自己写。 我真正开始有意识第记录博客是大二的时候，当时加入了学校的一个科创团队，韩队长教我们记录的重要性，他就经常在知乎上发布文章，记录他踩过的坑，构建自己的知识体系。在他的影响下，我也开始用电脑记录一些自己的东西，不过我的第一个平台还是前面提到的CSDN，还记得当时写的第一篇是关于MATLAB desolve函数的解读，但是当时我并没有养成写博客整理笔记的习惯。 真正让我迷上写博客的是大四的时候，真是后知后觉了哈哈，当时做的课程设计要设计PCB电路板，就把自己设计电路板踩过的坑给记录放在了CSDN，没想到以外收到了一波点赞和收藏，我突然感觉了一点成就感，很多自媒体的博主在他们视频的末尾都说：“你们的点赞和收藏就是对我最大的支持。”想来真是一点没错，于是大四的时候觉得能记录的就记录一下，没想到那年倒是写了100来篇。到现在已经破200篇了。我开始逐渐对写博客这件事形成了习惯。 读研究生的时候，在网上认识了好友小曦。小曦推荐我一本小说叫《众神世界》，虽然主角成长得很变态，但是不妨碍里面还是有很好的方法论。我很认可也很喜欢里面所说的费曼技巧的本质： 大家都以为，学习是看书，是记忆，是听讲，最多加上反复看或听，不，这只是学习的一部分，我把这部分命名为“输入”，也就是从外界吸收知识。我们做题，是不是由内而外利用知识？费曼技巧中的“教”，是不是也一种由内而外？这个过程，我称其为“输出”。学习的本质，就是输入加输出的过程，输入和输出构成完整的学习体系！ 我们在“输入”的时候，也就是听、看的时候，是“别人的东西”进入到我们的大脑里，我们如果不思考，不去动用那些“别人的东西”，为了节省精力，大脑会欺骗我们，让我们假装理解了。这样，仅仅是知道一个‘新名词’而已，离“理解”差十万八千里！当必须要输出的时候，我们的大脑会把需要的知识进行“整理”“挑选”“组合”“排列”“对比”“联系”等等一系列复杂的处理，如果我们输出不了，卡住了，是什么原因？没理解！只有理解了，才能输出。不理解怎么办？费曼技巧会让我们重新学习，重新理解。 虽然在CSDN上记录了很多，不过秉持着费曼技巧的思想，我觉得自己还是记录一些比较成体系的内容，况且倒腾一个个人博客也是能学会很多东西的，我在写博客的过程中也是丰富自己的认识，更体会到终身学习的重要性。 我希望，自己能做个持续输出、精进自己的长期主义者，可能更新不是很快，因为现在是研究生也有自己的日常工作，不过我还是尽量每周更新至少一篇吧。 于是啊于是，就有了你现在看到的这篇博客。"},{"title":"Hello World","path":"/2023/03/25/hello-world/","content":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick Start Create a new post 1$ hexo new &quot;My New Post&quot; More info: Writing Run server 1$ hexo server More info: Server Generate static files 1$ hexo generate More info: Generating Deploy to remote sites 1$ hexo deploy More info: Deployment"}]